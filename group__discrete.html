<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>ModbusMaster: Modbus Function Codes for Discrete Coils/Inputs</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Modbus Function Codes for Discrete Coils/Inputs</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__discrete.html#ga869b01cb329ac2198d0ca1f73f0b7e73">ModbusMaster::ReadCoils</a> (uint16_t, uint16_t)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Modbus function 0x01 Read Coils.  <a href="#ga869b01cb329ac2198d0ca1f73f0b7e73"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__discrete.html#gacb43f90117b8fdd7d3ff54080c3843e7">ModbusMaster::ReadDiscreteInputs</a> (uint16_t, uint16_t)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Modbus function 0x02 Read Discrete Inputs.  <a href="#gacb43f90117b8fdd7d3ff54080c3843e7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__discrete.html#gacabeba64621bcaf296c5aed215397948">ModbusMaster::WriteSingleCoil</a> (uint16_t, uint8_t)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Modbus function 0x05 Write Single Coil.  <a href="#gacabeba64621bcaf296c5aed215397948"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__discrete.html#ga4c53ff0f62db2bfa87858afd821ae4a8">ModbusMaster::WriteMultipleCoils</a> (uint16_t, uint16_t)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Modbus function 0x0F Write Multiple Coils.  <a href="#ga4c53ff0f62db2bfa87858afd821ae4a8"></a><br/></td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga869b01cb329ac2198d0ca1f73f0b7e73"></a><!-- doxytag: member="ModbusMaster::ReadCoils" ref="ga869b01cb329ac2198d0ca1f73f0b7e73" args="(uint16_t, uint16_t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t ModbusMaster::ReadCoils </td>
          <td>(</td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>u16ReadAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>u16BitQty</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Modbus function 0x01 Read Coils. </p>
<p>This function code is used to read from 1 to 2000 contiguous status of coils in a remote device. The request specifies the starting address, i.e. the address of the first coil specified, and the number of coils. Coils are addressed starting at zero.</p>
<p>The coils in the response buffer are packed as one coil per bit of the data field. Status is indicated as 1=ON and 0=OFF. The LSB of the first data word contains the output addressed in the query. The other coils follow toward the high order end of this word and from low order to high order in subsequent words.</p>
<p>If the returned quantity is not a multiple of sixteen, the remaining bits in the final data word will be padded with zeros (toward the high order end of the word).</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>u16ReadAddress</em>&nbsp;</td><td>address of first coil (0x0000..0xFFFF) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>u16BitQty</em>&nbsp;</td><td>quantity of coils to read (1..2000, enforced by remote device) </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on success; exception number on failure </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00248"></a>00248 {
<a name="l00249"></a>00249   <a class="code" href="class_modbus_master.html#adfb48ef6321f738cc4b55c4b6e4a6335" title="slave register from which to read">_u16ReadAddress</a> = u16ReadAddress;
<a name="l00250"></a>00250   <a class="code" href="class_modbus_master.html#a043a88f0b184accd9176770dee55a6b3" title="quantity of words to read">_u16ReadQty</a> = u16BitQty;
<a name="l00251"></a>00251   <span class="keywordflow">return</span> <a class="code" href="class_modbus_master.html#a4c88df0ed38e98457e8ac74c2ed5dc81" title="Modbus transaction engine.">ModbusMasterTransaction</a>(<a class="code" href="class_modbus_master.html#ad7e7aa7bed1b86f24bd577725edc633d" title="Modbus function 0x01 Read Coils.">ku8MBReadCoils</a>);
<a name="l00252"></a>00252 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="gacb43f90117b8fdd7d3ff54080c3843e7"></a><!-- doxytag: member="ModbusMaster::ReadDiscreteInputs" ref="gacb43f90117b8fdd7d3ff54080c3843e7" args="(uint16_t, uint16_t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t ModbusMaster::ReadDiscreteInputs </td>
          <td>(</td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>u16ReadAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>u16BitQty</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Modbus function 0x02 Read Discrete Inputs. </p>
<p>This function code is used to read from 1 to 2000 contiguous status of discrete inputs in a remote device. The request specifies the starting address, i.e. the address of the first input specified, and the number of inputs. Discrete inputs are addressed starting at zero.</p>
<p>The discrete inputs in the response buffer are packed as one input per bit of the data field. Status is indicated as 1=ON; 0=OFF. The LSB of the first data word contains the input addressed in the query. The other inputs follow toward the high order end of this word, and from low order to high order in subsequent words.</p>
<p>If the returned quantity is not a multiple of sixteen, the remaining bits in the final data word will be padded with zeros (toward the high order end of the word).</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>u16ReadAddress</em>&nbsp;</td><td>address of first discrete input (0x0000..0xFFFF) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>u16BitQty</em>&nbsp;</td><td>quantity of discrete inputs to read (1..2000, enforced by remote device) </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on success; exception number on failure </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00280"></a>00280 {
<a name="l00281"></a>00281   <a class="code" href="class_modbus_master.html#adfb48ef6321f738cc4b55c4b6e4a6335" title="slave register from which to read">_u16ReadAddress</a> = u16ReadAddress;
<a name="l00282"></a>00282   <a class="code" href="class_modbus_master.html#a043a88f0b184accd9176770dee55a6b3" title="quantity of words to read">_u16ReadQty</a> = u16BitQty;
<a name="l00283"></a>00283   <span class="keywordflow">return</span> <a class="code" href="class_modbus_master.html#a4c88df0ed38e98457e8ac74c2ed5dc81" title="Modbus transaction engine.">ModbusMasterTransaction</a>(<a class="code" href="class_modbus_master.html#ae08306bd72d5487bccf16c12ade79098" title="Modbus function 0x02 Read Discrete Inputs.">ku8MBReadDiscreteInputs</a>);
<a name="l00284"></a>00284 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="gacabeba64621bcaf296c5aed215397948"></a><!-- doxytag: member="ModbusMaster::WriteSingleCoil" ref="gacabeba64621bcaf296c5aed215397948" args="(uint16_t, uint8_t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t ModbusMaster::WriteSingleCoil </td>
          <td>(</td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>u16WriteAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&nbsp;</td>
          <td class="paramname"> <em>u8State</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Modbus function 0x05 Write Single Coil. </p>
<p>This function code is used to write a single output to either ON or OFF in a remote device. The requested ON/OFF state is specified by a constant in the state field. A non-zero value requests the output to be ON and a value of 0 requests it to be OFF. The request specifies the address of the coil to be forced. Coils are addressed starting at zero.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>u16WriteAddress</em>&nbsp;</td><td>address of the coil (0x0000..0xFFFF) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>u8State</em>&nbsp;</td><td>0=OFF, non-zero=ON (0x00..0xFF) </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on success; exception number on failure </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00352"></a>00352 {
<a name="l00353"></a>00353   <a class="code" href="class_modbus_master.html#a00edff3fbd53d94dcc1b6be593c61289" title="slave register to which to write">_u16WriteAddress</a> = u16WriteAddress;
<a name="l00354"></a>00354   <a class="code" href="class_modbus_master.html#ad3191c5da05cf72e117814ba0472b420" title="quantity of words to write">_u16WriteQty</a> = (u8State ? 0xFF00 : 0x0000);
<a name="l00355"></a>00355   <span class="keywordflow">return</span> <a class="code" href="class_modbus_master.html#a4c88df0ed38e98457e8ac74c2ed5dc81" title="Modbus transaction engine.">ModbusMasterTransaction</a>(<a class="code" href="class_modbus_master.html#a401bf89674f94726efca951115704869" title="Modbus function 0x05 Write Single Coil.">ku8MBWriteSingleCoil</a>);
<a name="l00356"></a>00356 }
</pre></div></p>

</div>
</div>
<a class="anchor" id="ga4c53ff0f62db2bfa87858afd821ae4a8"></a><!-- doxytag: member="ModbusMaster::WriteMultipleCoils" ref="ga4c53ff0f62db2bfa87858afd821ae4a8" args="(uint16_t, uint16_t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t ModbusMaster::WriteMultipleCoils </td>
          <td>(</td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>u16WriteAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&nbsp;</td>
          <td class="paramname"> <em>u16BitQty</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Modbus function 0x0F Write Multiple Coils. </p>
<p>This function code is used to force each coil in a sequence of coils to either ON or OFF in a remote device. The request specifies the coil references to be forced. Coils are addressed starting at zero.</p>
<p>The requested ON/OFF states are specified by contents of the transmit buffer. A logical '1' in a bit position of the buffer requests the corresponding output to be ON. A logical '0' requests it to be OFF.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>u16WriteAddress</em>&nbsp;</td><td>address of the first coil (0x0000..0xFFFF) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>u16BitQty</em>&nbsp;</td><td>quantity of coils to write (1..2000, enforced by remote device) </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 on success; exception number on failure </dd></dl>

<p><div class="fragment"><pre class="fragment"><a name="l00399"></a>00399 {
<a name="l00400"></a>00400   <a class="code" href="class_modbus_master.html#a00edff3fbd53d94dcc1b6be593c61289" title="slave register to which to write">_u16WriteAddress</a> = u16WriteAddress;
<a name="l00401"></a>00401   <a class="code" href="class_modbus_master.html#ad3191c5da05cf72e117814ba0472b420" title="quantity of words to write">_u16WriteQty</a> = u16BitQty;
<a name="l00402"></a>00402   <span class="keywordflow">return</span> <a class="code" href="class_modbus_master.html#a4c88df0ed38e98457e8ac74c2ed5dc81" title="Modbus transaction engine.">ModbusMasterTransaction</a>(<a class="code" href="class_modbus_master.html#a31e5f44d74fa84bf4c9440c82d123fe9" title="Modbus function 0x0F Write Multiple Coils.">ku8MBWriteMultipleCoils</a>);
<a name="l00403"></a>00403 }
</pre></div></p>

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.2 </small></address>
</body>
</html>
