<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>ModbusMaster: ModbusMaster Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ModbusMaster
   &#160;<span id="projectnumber">v0.10.3</span>
   </div>
   <div id="projectbrief">Arduino library for communicating with Modbus slaves over RS232/485 (via RTU protocol).</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('class_modbus_master.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="class_modbus_master-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ModbusMaster Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Arduino class library for communicating with Modbus slaves over RS232/485 (via RTU protocol).  
 <a href="class_modbus_master.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_modbus_master_8h_source.html">ModbusMaster.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:gac33a5bbc8188eb4a3a9a6bf8494bdc27"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__setup.html#gac33a5bbc8188eb4a3a9a6bf8494bdc27">ModbusMaster</a> ()</td></tr>
<tr class="memdesc:gac33a5bbc8188eb4a3a9a6bf8494bdc27"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="group__setup.html#gac33a5bbc8188eb4a3a9a6bf8494bdc27">More...</a><br /></td></tr>
<tr class="separator:gac33a5bbc8188eb4a3a9a6bf8494bdc27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga79102d6dd559b647c8a5a385184b89cd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__setup.html#ga79102d6dd559b647c8a5a385184b89cd">ModbusMaster</a> (uint8_t)</td></tr>
<tr class="separator:ga79102d6dd559b647c8a5a385184b89cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga508ecee40cf75898f27f8404c1574164"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__setup.html#ga508ecee40cf75898f27f8404c1574164">ModbusMaster</a> (uint8_t, uint8_t)</td></tr>
<tr class="separator:ga508ecee40cf75898f27f8404c1574164"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0f393213ede2f78801fca5add4eab139"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__setup.html#ga0f393213ede2f78801fca5add4eab139">begin</a> ()</td></tr>
<tr class="memdesc:ga0f393213ede2f78801fca5add4eab139"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize class object.  <a href="group__setup.html#ga0f393213ede2f78801fca5add4eab139">More...</a><br /></td></tr>
<tr class="separator:ga0f393213ede2f78801fca5add4eab139"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabc1145dc790c2b8da2d5c20ff34b187e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__setup.html#gabc1145dc790c2b8da2d5c20ff34b187e">begin</a> (uint16_t)</td></tr>
<tr class="separator:gabc1145dc790c2b8da2d5c20ff34b187e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea6654dac81e6b692dd6a1b0be8a218e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_modbus_master.html#aea6654dac81e6b692dd6a1b0be8a218e">idle</a> (void(*)())</td></tr>
<tr class="memdesc:aea6654dac81e6b692dd6a1b0be8a218e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set idle time callback function (cooperative multitasking).  <a href="#aea6654dac81e6b692dd6a1b0be8a218e">More...</a><br /></td></tr>
<tr class="separator:aea6654dac81e6b692dd6a1b0be8a218e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5e932dcb444f23094d6bf74963c5dccc"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__buffer.html#ga5e932dcb444f23094d6bf74963c5dccc">getResponseBuffer</a> (uint8_t)</td></tr>
<tr class="memdesc:ga5e932dcb444f23094d6bf74963c5dccc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve data from response buffer.  <a href="group__buffer.html#ga5e932dcb444f23094d6bf74963c5dccc">More...</a><br /></td></tr>
<tr class="separator:ga5e932dcb444f23094d6bf74963c5dccc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga492bf8f5389f1fca62d3666028070edb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__buffer.html#ga492bf8f5389f1fca62d3666028070edb">clearResponseBuffer</a> ()</td></tr>
<tr class="memdesc:ga492bf8f5389f1fca62d3666028070edb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear Modbus response buffer.  <a href="group__buffer.html#ga492bf8f5389f1fca62d3666028070edb">More...</a><br /></td></tr>
<tr class="separator:ga492bf8f5389f1fca62d3666028070edb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaef93f45298dfab2a7816bd38dac34bc9"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__buffer.html#gaef93f45298dfab2a7816bd38dac34bc9">setTransmitBuffer</a> (uint8_t, uint16_t)</td></tr>
<tr class="memdesc:gaef93f45298dfab2a7816bd38dac34bc9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Place data in transmit buffer.  <a href="group__buffer.html#gaef93f45298dfab2a7816bd38dac34bc9">More...</a><br /></td></tr>
<tr class="separator:gaef93f45298dfab2a7816bd38dac34bc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6fa2ccf75a0377cd38f848af42595656"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__buffer.html#ga6fa2ccf75a0377cd38f848af42595656">clearTransmitBuffer</a> ()</td></tr>
<tr class="memdesc:ga6fa2ccf75a0377cd38f848af42595656"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear Modbus transmit buffer.  <a href="group__buffer.html#ga6fa2ccf75a0377cd38f848af42595656">More...</a><br /></td></tr>
<tr class="separator:ga6fa2ccf75a0377cd38f848af42595656"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa935379dce2bb6c9da095e4bff896e1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aaa935379dce2bb6c9da095e4bff896e1"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>beginTransmission</b> (uint16_t)</td></tr>
<tr class="separator:aaa935379dce2bb6c9da095e4bff896e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6778a8da4587d8758f0c7cfe893d4edf"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6778a8da4587d8758f0c7cfe893d4edf"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>requestFrom</b> (uint16_t, uint16_t)</td></tr>
<tr class="separator:a6778a8da4587d8758f0c7cfe893d4edf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5edca67c6f99e9714bd60f376ab7141e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5edca67c6f99e9714bd60f376ab7141e"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>sendBit</b> (bool)</td></tr>
<tr class="separator:a5edca67c6f99e9714bd60f376ab7141e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7d73359543607e7834e475139004e6a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad7d73359543607e7834e475139004e6a"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>send</b> (uint8_t)</td></tr>
<tr class="separator:ad7d73359543607e7834e475139004e6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7da1f366af28e30540450ad731a3879"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae7da1f366af28e30540450ad731a3879"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>send</b> (uint16_t)</td></tr>
<tr class="separator:ae7da1f366af28e30540450ad731a3879"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a852873e0a13c899358d37a13da8d9e0c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a852873e0a13c899358d37a13da8d9e0c"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>send</b> (uint32_t)</td></tr>
<tr class="separator:a852873e0a13c899358d37a13da8d9e0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55ff79608f37f9d19e0a5741089a08e1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a55ff79608f37f9d19e0a5741089a08e1"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>available</b> (void)</td></tr>
<tr class="separator:a55ff79608f37f9d19e0a5741089a08e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a339bd39533db98ed0dc444a89ee8420b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a339bd39533db98ed0dc444a89ee8420b"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><b>receive</b> (void)</td></tr>
<tr class="separator:a339bd39533db98ed0dc444a89ee8420b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga560b271d9e1ccd1294f64e1bd01aa5d1"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__discrete.html#ga560b271d9e1ccd1294f64e1bd01aa5d1">readCoils</a> (uint16_t, uint16_t)</td></tr>
<tr class="memdesc:ga560b271d9e1ccd1294f64e1bd01aa5d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Modbus function 0x01 Read Coils.  <a href="group__discrete.html#ga560b271d9e1ccd1294f64e1bd01aa5d1">More...</a><br /></td></tr>
<tr class="separator:ga560b271d9e1ccd1294f64e1bd01aa5d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga81d175423a5061d3aa8e778fc5534bed"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__discrete.html#ga81d175423a5061d3aa8e778fc5534bed">readDiscreteInputs</a> (uint16_t, uint16_t)</td></tr>
<tr class="memdesc:ga81d175423a5061d3aa8e778fc5534bed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Modbus function 0x02 Read Discrete Inputs.  <a href="group__discrete.html#ga81d175423a5061d3aa8e778fc5534bed">More...</a><br /></td></tr>
<tr class="separator:ga81d175423a5061d3aa8e778fc5534bed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9ffe845bb045dab15afc02a9e72b8d6e"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__register.html#ga9ffe845bb045dab15afc02a9e72b8d6e">readHoldingRegisters</a> (uint16_t, uint16_t)</td></tr>
<tr class="memdesc:ga9ffe845bb045dab15afc02a9e72b8d6e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Modbus function 0x03 Read Holding Registers.  <a href="group__register.html#ga9ffe845bb045dab15afc02a9e72b8d6e">More...</a><br /></td></tr>
<tr class="separator:ga9ffe845bb045dab15afc02a9e72b8d6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9094a4770bf9fac0abe2f34aac3a40ec"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__register.html#ga9094a4770bf9fac0abe2f34aac3a40ec">readInputRegisters</a> (uint16_t, uint8_t)</td></tr>
<tr class="memdesc:ga9094a4770bf9fac0abe2f34aac3a40ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Modbus function 0x04 Read Input Registers.  <a href="group__register.html#ga9094a4770bf9fac0abe2f34aac3a40ec">More...</a><br /></td></tr>
<tr class="separator:ga9094a4770bf9fac0abe2f34aac3a40ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa132b7dee3f46d6f6aa625bba4ad25bf"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__discrete.html#gaa132b7dee3f46d6f6aa625bba4ad25bf">writeSingleCoil</a> (uint16_t, uint8_t)</td></tr>
<tr class="memdesc:gaa132b7dee3f46d6f6aa625bba4ad25bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Modbus function 0x05 Write Single Coil.  <a href="group__discrete.html#gaa132b7dee3f46d6f6aa625bba4ad25bf">More...</a><br /></td></tr>
<tr class="separator:gaa132b7dee3f46d6f6aa625bba4ad25bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac3b5510cf862f3d584e393d07cd6ceed"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__register.html#gac3b5510cf862f3d584e393d07cd6ceed">writeSingleRegister</a> (uint16_t, uint16_t)</td></tr>
<tr class="memdesc:gac3b5510cf862f3d584e393d07cd6ceed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Modbus function 0x06 Write Single Register.  <a href="group__register.html#gac3b5510cf862f3d584e393d07cd6ceed">More...</a><br /></td></tr>
<tr class="separator:gac3b5510cf862f3d584e393d07cd6ceed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga01eb4d05f58d6ae00c6db680cf00c423"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__discrete.html#ga01eb4d05f58d6ae00c6db680cf00c423">writeMultipleCoils</a> (uint16_t, uint16_t)</td></tr>
<tr class="memdesc:ga01eb4d05f58d6ae00c6db680cf00c423"><td class="mdescLeft">&#160;</td><td class="mdescRight">Modbus function 0x0F Write Multiple Coils.  <a href="group__discrete.html#ga01eb4d05f58d6ae00c6db680cf00c423">More...</a><br /></td></tr>
<tr class="separator:ga01eb4d05f58d6ae00c6db680cf00c423"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a385d0c743d74341a01d96e7da7a5d4fd"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a385d0c743d74341a01d96e7da7a5d4fd"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>writeMultipleCoils</b> ()</td></tr>
<tr class="separator:a385d0c743d74341a01d96e7da7a5d4fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga53c894306b676cc702851e204acaad3e"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__register.html#ga53c894306b676cc702851e204acaad3e">writeMultipleRegisters</a> (uint16_t, uint16_t)</td></tr>
<tr class="memdesc:ga53c894306b676cc702851e204acaad3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Modbus function 0x10 Write Multiple Registers.  <a href="group__register.html#ga53c894306b676cc702851e204acaad3e">More...</a><br /></td></tr>
<tr class="separator:ga53c894306b676cc702851e204acaad3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74c730ea8722a8ae0444b71d24340b87"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a74c730ea8722a8ae0444b71d24340b87"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>writeMultipleRegisters</b> ()</td></tr>
<tr class="separator:a74c730ea8722a8ae0444b71d24340b87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0bd8f8cde67f0a4ee4e7dcae7df3b695"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__register.html#ga0bd8f8cde67f0a4ee4e7dcae7df3b695">maskWriteRegister</a> (uint16_t, uint16_t, uint16_t)</td></tr>
<tr class="memdesc:ga0bd8f8cde67f0a4ee4e7dcae7df3b695"><td class="mdescLeft">&#160;</td><td class="mdescRight">Modbus function 0x16 Mask Write Register.  <a href="group__register.html#ga0bd8f8cde67f0a4ee4e7dcae7df3b695">More...</a><br /></td></tr>
<tr class="separator:ga0bd8f8cde67f0a4ee4e7dcae7df3b695"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5d764079d29620431fb97003cf54cc7b"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__register.html#ga5d764079d29620431fb97003cf54cc7b">readWriteMultipleRegisters</a> (uint16_t, uint16_t, uint16_t, uint16_t)</td></tr>
<tr class="memdesc:ga5d764079d29620431fb97003cf54cc7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Modbus function 0x17 Read Write Multiple Registers.  <a href="group__register.html#ga5d764079d29620431fb97003cf54cc7b">More...</a><br /></td></tr>
<tr class="separator:ga5d764079d29620431fb97003cf54cc7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0c0f48bee7ccaaee58394466aba642b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac0c0f48bee7ccaaee58394466aba642b"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>readWriteMultipleRegisters</b> (uint16_t, uint16_t)</td></tr>
<tr class="separator:ac0c0f48bee7ccaaee58394466aba642b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:gaf69c1c360b84adc5bf1c7bbe071f1970"><td class="memItemLeft" align="right" valign="top">static const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__constant.html#gaf69c1c360b84adc5bf1c7bbe071f1970">ku8MBIllegalFunction</a> = 0x01</td></tr>
<tr class="memdesc:gaf69c1c360b84adc5bf1c7bbe071f1970"><td class="mdescLeft">&#160;</td><td class="mdescRight">Modbus protocol illegal function exception.  <a href="group__constant.html#gaf69c1c360b84adc5bf1c7bbe071f1970">More...</a><br /></td></tr>
<tr class="separator:gaf69c1c360b84adc5bf1c7bbe071f1970"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5d90968b8bbc157f9937c2d9a866102d"><td class="memItemLeft" align="right" valign="top">static const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__constant.html#ga5d90968b8bbc157f9937c2d9a866102d">ku8MBIllegalDataAddress</a> = 0x02</td></tr>
<tr class="memdesc:ga5d90968b8bbc157f9937c2d9a866102d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Modbus protocol illegal data address exception.  <a href="group__constant.html#ga5d90968b8bbc157f9937c2d9a866102d">More...</a><br /></td></tr>
<tr class="separator:ga5d90968b8bbc157f9937c2d9a866102d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa49d578ceaa82518573b3f7e2d925322"><td class="memItemLeft" align="right" valign="top">static const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__constant.html#gaa49d578ceaa82518573b3f7e2d925322">ku8MBIllegalDataValue</a> = 0x03</td></tr>
<tr class="memdesc:gaa49d578ceaa82518573b3f7e2d925322"><td class="mdescLeft">&#160;</td><td class="mdescRight">Modbus protocol illegal data value exception.  <a href="group__constant.html#gaa49d578ceaa82518573b3f7e2d925322">More...</a><br /></td></tr>
<tr class="separator:gaa49d578ceaa82518573b3f7e2d925322"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3b26f812363d765a334d72635da74fe5"><td class="memItemLeft" align="right" valign="top">static const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__constant.html#ga3b26f812363d765a334d72635da74fe5">ku8MBSlaveDeviceFailure</a> = 0x04</td></tr>
<tr class="memdesc:ga3b26f812363d765a334d72635da74fe5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Modbus protocol slave device failure exception.  <a href="group__constant.html#ga3b26f812363d765a334d72635da74fe5">More...</a><br /></td></tr>
<tr class="separator:ga3b26f812363d765a334d72635da74fe5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga81dd9e8d2936e369359777d67769a657"><td class="memItemLeft" align="right" valign="top">static const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__constant.html#ga81dd9e8d2936e369359777d67769a657">ku8MBSuccess</a> = 0x00</td></tr>
<tr class="memdesc:ga81dd9e8d2936e369359777d67769a657"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="class_modbus_master.html" title="Arduino class library for communicating with Modbus slaves over RS232/485 (via RTU protocol)...">ModbusMaster</a> success.  <a href="group__constant.html#ga81dd9e8d2936e369359777d67769a657">More...</a><br /></td></tr>
<tr class="separator:ga81dd9e8d2936e369359777d67769a657"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga19521b4671bdc1ded03af72e2f3b958e"><td class="memItemLeft" align="right" valign="top">static const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__constant.html#ga19521b4671bdc1ded03af72e2f3b958e">ku8MBInvalidSlaveID</a> = 0xE0</td></tr>
<tr class="memdesc:ga19521b4671bdc1ded03af72e2f3b958e"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="class_modbus_master.html" title="Arduino class library for communicating with Modbus slaves over RS232/485 (via RTU protocol)...">ModbusMaster</a> invalid response slave ID exception.  <a href="group__constant.html#ga19521b4671bdc1ded03af72e2f3b958e">More...</a><br /></td></tr>
<tr class="separator:ga19521b4671bdc1ded03af72e2f3b958e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga31e9072531cf487c137b68b5e1e68926"><td class="memItemLeft" align="right" valign="top">static const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__constant.html#ga31e9072531cf487c137b68b5e1e68926">ku8MBInvalidFunction</a> = 0xE1</td></tr>
<tr class="memdesc:ga31e9072531cf487c137b68b5e1e68926"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="class_modbus_master.html" title="Arduino class library for communicating with Modbus slaves over RS232/485 (via RTU protocol)...">ModbusMaster</a> invalid response function exception.  <a href="group__constant.html#ga31e9072531cf487c137b68b5e1e68926">More...</a><br /></td></tr>
<tr class="separator:ga31e9072531cf487c137b68b5e1e68926"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8eb8e14ee2bcf58afc3fbbb4014f297c"><td class="memItemLeft" align="right" valign="top">static const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__constant.html#ga8eb8e14ee2bcf58afc3fbbb4014f297c">ku8MBResponseTimedOut</a> = 0xE2</td></tr>
<tr class="memdesc:ga8eb8e14ee2bcf58afc3fbbb4014f297c"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="class_modbus_master.html" title="Arduino class library for communicating with Modbus slaves over RS232/485 (via RTU protocol)...">ModbusMaster</a> response timed out exception.  <a href="group__constant.html#ga8eb8e14ee2bcf58afc3fbbb4014f297c">More...</a><br /></td></tr>
<tr class="separator:ga8eb8e14ee2bcf58afc3fbbb4014f297c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa73463392a988bbc5260690168b5ca08"><td class="memItemLeft" align="right" valign="top">static const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__constant.html#gaa73463392a988bbc5260690168b5ca08">ku8MBInvalidCRC</a> = 0xE3</td></tr>
<tr class="memdesc:gaa73463392a988bbc5260690168b5ca08"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="class_modbus_master.html" title="Arduino class library for communicating with Modbus slaves over RS232/485 (via RTU protocol)...">ModbusMaster</a> invalid response CRC exception.  <a href="group__constant.html#gaa73463392a988bbc5260690168b5ca08">More...</a><br /></td></tr>
<tr class="separator:gaa73463392a988bbc5260690168b5ca08"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a4c88df0ed38e98457e8ac74c2ed5dc81"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_modbus_master.html#a4c88df0ed38e98457e8ac74c2ed5dc81">ModbusMasterTransaction</a> (uint8_t u8MBFunction)</td></tr>
<tr class="memdesc:a4c88df0ed38e98457e8ac74c2ed5dc81"><td class="mdescLeft">&#160;</td><td class="mdescRight">Modbus transaction engine.  <a href="#a4c88df0ed38e98457e8ac74c2ed5dc81">More...</a><br /></td></tr>
<tr class="separator:a4c88df0ed38e98457e8ac74c2ed5dc81"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a8059450709d3ef2f7b817e24ede57a94"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8059450709d3ef2f7b817e24ede57a94"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_modbus_master.html#a8059450709d3ef2f7b817e24ede57a94">_u8SerialPort</a></td></tr>
<tr class="memdesc:a8059450709d3ef2f7b817e24ede57a94"><td class="mdescLeft">&#160;</td><td class="mdescRight">serial port (0..3) initialized in constructor <br /></td></tr>
<tr class="separator:a8059450709d3ef2f7b817e24ede57a94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bc19d22b864e85ad67b4b633fa56597"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8bc19d22b864e85ad67b4b633fa56597"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_modbus_master.html#a8bc19d22b864e85ad67b4b633fa56597">_u8MBSlave</a></td></tr>
<tr class="memdesc:a8bc19d22b864e85ad67b4b633fa56597"><td class="mdescLeft">&#160;</td><td class="mdescRight">Modbus slave (1..255) initialized in constructor. <br /></td></tr>
<tr class="separator:a8bc19d22b864e85ad67b4b633fa56597"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c3bdb0037ef87da266e46a6ecdd8a84"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2c3bdb0037ef87da266e46a6ecdd8a84"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_modbus_master.html#a2c3bdb0037ef87da266e46a6ecdd8a84">_u16BaudRate</a></td></tr>
<tr class="memdesc:a2c3bdb0037ef87da266e46a6ecdd8a84"><td class="mdescLeft">&#160;</td><td class="mdescRight">baud rate (300..115200) initialized in <a class="el" href="group__setup.html#ga0f393213ede2f78801fca5add4eab139" title="Initialize class object. ">begin()</a> <br /></td></tr>
<tr class="separator:a2c3bdb0037ef87da266e46a6ecdd8a84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfb48ef6321f738cc4b55c4b6e4a6335"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adfb48ef6321f738cc4b55c4b6e4a6335"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_modbus_master.html#adfb48ef6321f738cc4b55c4b6e4a6335">_u16ReadAddress</a></td></tr>
<tr class="memdesc:adfb48ef6321f738cc4b55c4b6e4a6335"><td class="mdescLeft">&#160;</td><td class="mdescRight">slave register from which to read <br /></td></tr>
<tr class="separator:adfb48ef6321f738cc4b55c4b6e4a6335"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a043a88f0b184accd9176770dee55a6b3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a043a88f0b184accd9176770dee55a6b3"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_modbus_master.html#a043a88f0b184accd9176770dee55a6b3">_u16ReadQty</a></td></tr>
<tr class="memdesc:a043a88f0b184accd9176770dee55a6b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">quantity of words to read <br /></td></tr>
<tr class="separator:a043a88f0b184accd9176770dee55a6b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a347a26fa1b91d7d0210b021e52a95268"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a347a26fa1b91d7d0210b021e52a95268"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_modbus_master.html#a347a26fa1b91d7d0210b021e52a95268">_u16ResponseBuffer</a> [<a class="el" href="class_modbus_master.html#ab9a1a34c8e3bbd84529230e559694c29">ku8MaxBufferSize</a>]</td></tr>
<tr class="memdesc:a347a26fa1b91d7d0210b021e52a95268"><td class="mdescLeft">&#160;</td><td class="mdescRight">buffer to store Modbus slave response; read via GetResponseBuffer() <br /></td></tr>
<tr class="separator:a347a26fa1b91d7d0210b021e52a95268"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00edff3fbd53d94dcc1b6be593c61289"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a00edff3fbd53d94dcc1b6be593c61289"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_modbus_master.html#a00edff3fbd53d94dcc1b6be593c61289">_u16WriteAddress</a></td></tr>
<tr class="memdesc:a00edff3fbd53d94dcc1b6be593c61289"><td class="mdescLeft">&#160;</td><td class="mdescRight">slave register to which to write <br /></td></tr>
<tr class="separator:a00edff3fbd53d94dcc1b6be593c61289"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3191c5da05cf72e117814ba0472b420"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad3191c5da05cf72e117814ba0472b420"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_modbus_master.html#ad3191c5da05cf72e117814ba0472b420">_u16WriteQty</a></td></tr>
<tr class="memdesc:ad3191c5da05cf72e117814ba0472b420"><td class="mdescLeft">&#160;</td><td class="mdescRight">quantity of words to write <br /></td></tr>
<tr class="separator:ad3191c5da05cf72e117814ba0472b420"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a79a050ef684f78b06b7543a56f54fb"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8a79a050ef684f78b06b7543a56f54fb"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_modbus_master.html#a8a79a050ef684f78b06b7543a56f54fb">_u16TransmitBuffer</a> [<a class="el" href="class_modbus_master.html#ab9a1a34c8e3bbd84529230e559694c29">ku8MaxBufferSize</a>]</td></tr>
<tr class="memdesc:a8a79a050ef684f78b06b7543a56f54fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">buffer containing data to transmit to Modbus slave; set via SetTransmitBuffer() <br /></td></tr>
<tr class="separator:a8a79a050ef684f78b06b7543a56f54fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a1319a6a43f2c0c35fae0d73ecb78f2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8a1319a6a43f2c0c35fae0d73ecb78f2"></a>
uint16_t *&#160;</td><td class="memItemRight" valign="bottom"><b>txBuffer</b></td></tr>
<tr class="separator:a8a1319a6a43f2c0c35fae0d73ecb78f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab13bbff1d0d0cc8cbe6728759c12ce94"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab13bbff1d0d0cc8cbe6728759c12ce94"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>_u8TransmitBufferIndex</b></td></tr>
<tr class="separator:ab13bbff1d0d0cc8cbe6728759c12ce94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adaaca6b41ea08b17b03c91a235b2af54"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adaaca6b41ea08b17b03c91a235b2af54"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><b>u16TransmitBufferLength</b></td></tr>
<tr class="separator:adaaca6b41ea08b17b03c91a235b2af54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae252e46565b5534c93be3932297aca7e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae252e46565b5534c93be3932297aca7e"></a>
uint16_t *&#160;</td><td class="memItemRight" valign="bottom"><b>rxBuffer</b></td></tr>
<tr class="separator:ae252e46565b5534c93be3932297aca7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e045fe6a006da61e0a4c102a6ebab34"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6e045fe6a006da61e0a4c102a6ebab34"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>_u8ResponseBufferIndex</b></td></tr>
<tr class="separator:a6e045fe6a006da61e0a4c102a6ebab34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab339c85b44371f9c5ea76ce7041e47a4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab339c85b44371f9c5ea76ce7041e47a4"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>_u8ResponseBufferLength</b></td></tr>
<tr class="separator:ab339c85b44371f9c5ea76ce7041e47a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab68156649f2938a966192c69834342e8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab68156649f2938a966192c69834342e8"></a>
void(*&#160;</td><td class="memItemRight" valign="bottom"><b>_idle</b> )()</td></tr>
<tr class="separator:ab68156649f2938a966192c69834342e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:ab9a1a34c8e3bbd84529230e559694c29"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab9a1a34c8e3bbd84529230e559694c29"></a>
static const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_modbus_master.html#ab9a1a34c8e3bbd84529230e559694c29">ku8MaxBufferSize</a> = 64</td></tr>
<tr class="memdesc:ab9a1a34c8e3bbd84529230e559694c29"><td class="mdescLeft">&#160;</td><td class="mdescRight">size of response/transmit buffers <br /></td></tr>
<tr class="separator:ab9a1a34c8e3bbd84529230e559694c29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7e7aa7bed1b86f24bd577725edc633d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad7e7aa7bed1b86f24bd577725edc633d"></a>
static const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_modbus_master.html#ad7e7aa7bed1b86f24bd577725edc633d">ku8MBReadCoils</a> = 0x01</td></tr>
<tr class="memdesc:ad7e7aa7bed1b86f24bd577725edc633d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Modbus function 0x01 Read Coils. <br /></td></tr>
<tr class="separator:ad7e7aa7bed1b86f24bd577725edc633d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae08306bd72d5487bccf16c12ade79098"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae08306bd72d5487bccf16c12ade79098"></a>
static const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_modbus_master.html#ae08306bd72d5487bccf16c12ade79098">ku8MBReadDiscreteInputs</a> = 0x02</td></tr>
<tr class="memdesc:ae08306bd72d5487bccf16c12ade79098"><td class="mdescLeft">&#160;</td><td class="mdescRight">Modbus function 0x02 Read Discrete Inputs. <br /></td></tr>
<tr class="separator:ae08306bd72d5487bccf16c12ade79098"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a401bf89674f94726efca951115704869"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a401bf89674f94726efca951115704869"></a>
static const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_modbus_master.html#a401bf89674f94726efca951115704869">ku8MBWriteSingleCoil</a> = 0x05</td></tr>
<tr class="memdesc:a401bf89674f94726efca951115704869"><td class="mdescLeft">&#160;</td><td class="mdescRight">Modbus function 0x05 Write Single Coil. <br /></td></tr>
<tr class="separator:a401bf89674f94726efca951115704869"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31e5f44d74fa84bf4c9440c82d123fe9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a31e5f44d74fa84bf4c9440c82d123fe9"></a>
static const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_modbus_master.html#a31e5f44d74fa84bf4c9440c82d123fe9">ku8MBWriteMultipleCoils</a> = 0x0F</td></tr>
<tr class="memdesc:a31e5f44d74fa84bf4c9440c82d123fe9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Modbus function 0x0F Write Multiple Coils. <br /></td></tr>
<tr class="separator:a31e5f44d74fa84bf4c9440c82d123fe9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6995c167c152d96b06a918869c03623"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae6995c167c152d96b06a918869c03623"></a>
static const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_modbus_master.html#ae6995c167c152d96b06a918869c03623">ku8MBReadHoldingRegisters</a> = 0x03</td></tr>
<tr class="memdesc:ae6995c167c152d96b06a918869c03623"><td class="mdescLeft">&#160;</td><td class="mdescRight">Modbus function 0x03 Read Holding Registers. <br /></td></tr>
<tr class="separator:ae6995c167c152d96b06a918869c03623"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeaa94736b198f6a05cf74e0466afb443"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aeaa94736b198f6a05cf74e0466afb443"></a>
static const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_modbus_master.html#aeaa94736b198f6a05cf74e0466afb443">ku8MBReadInputRegisters</a> = 0x04</td></tr>
<tr class="memdesc:aeaa94736b198f6a05cf74e0466afb443"><td class="mdescLeft">&#160;</td><td class="mdescRight">Modbus function 0x04 Read Input Registers. <br /></td></tr>
<tr class="separator:aeaa94736b198f6a05cf74e0466afb443"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab68b007cd9473c3ed09f36fb0f6ee3fa"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab68b007cd9473c3ed09f36fb0f6ee3fa"></a>
static const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_modbus_master.html#ab68b007cd9473c3ed09f36fb0f6ee3fa">ku8MBWriteSingleRegister</a> = 0x06</td></tr>
<tr class="memdesc:ab68b007cd9473c3ed09f36fb0f6ee3fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Modbus function 0x06 Write Single Register. <br /></td></tr>
<tr class="separator:ab68b007cd9473c3ed09f36fb0f6ee3fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf1f58e7806d4c7bc1638255e2639b86"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adf1f58e7806d4c7bc1638255e2639b86"></a>
static const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_modbus_master.html#adf1f58e7806d4c7bc1638255e2639b86">ku8MBWriteMultipleRegisters</a> = 0x10</td></tr>
<tr class="memdesc:adf1f58e7806d4c7bc1638255e2639b86"><td class="mdescLeft">&#160;</td><td class="mdescRight">Modbus function 0x10 Write Multiple Registers. <br /></td></tr>
<tr class="separator:adf1f58e7806d4c7bc1638255e2639b86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1de5e699bcada855fb26e336d2cd2cd3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1de5e699bcada855fb26e336d2cd2cd3"></a>
static const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_modbus_master.html#a1de5e699bcada855fb26e336d2cd2cd3">ku8MBMaskWriteRegister</a> = 0x16</td></tr>
<tr class="memdesc:a1de5e699bcada855fb26e336d2cd2cd3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Modbus function 0x16 Mask Write Register. <br /></td></tr>
<tr class="separator:a1de5e699bcada855fb26e336d2cd2cd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1c77f6f5f7e0f19d0c9b9916dca2263"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af1c77f6f5f7e0f19d0c9b9916dca2263"></a>
static const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_modbus_master.html#af1c77f6f5f7e0f19d0c9b9916dca2263">ku8MBReadWriteMultipleRegisters</a> = 0x17</td></tr>
<tr class="memdesc:af1c77f6f5f7e0f19d0c9b9916dca2263"><td class="mdescLeft">&#160;</td><td class="mdescRight">Modbus function 0x17 Read Write Multiple Registers. <br /></td></tr>
<tr class="separator:af1c77f6f5f7e0f19d0c9b9916dca2263"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9c5d42e3b5cd7ec40ce0c86f6fc1772"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac9c5d42e3b5cd7ec40ce0c86f6fc1772"></a>
static const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_modbus_master.html#ac9c5d42e3b5cd7ec40ce0c86f6fc1772">ku8MBResponseTimeout</a> = 200</td></tr>
<tr class="memdesc:ac9c5d42e3b5cd7ec40ce0c86f6fc1772"><td class="mdescLeft">&#160;</td><td class="mdescRight">Modbus timeout [milliseconds]. <br /></td></tr>
<tr class="separator:ac9c5d42e3b5cd7ec40ce0c86f6fc1772"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Arduino class library for communicating with Modbus slaves over RS232/485 (via RTU protocol). </p>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="examples_2_basic_2_basic_8pde-example.html#_a0">examples/Basic/Basic.pde</a>, and <a class="el" href="examples_2_phoenix_contact_nano_l_c_2_phoenix_contact_nano_l_c_8pde-example.html#_a0">examples/PhoenixContact_nanoLC/PhoenixContact_nanoLC.pde</a>.</dd>
</dl></div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="aea6654dac81e6b692dd6a1b0be8a218e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ModbusMaster::idle </td>
          <td>(</td>
          <td class="paramtype">void(*)()&#160;</td>
          <td class="paramname"><em>idle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set idle time callback function (cooperative multitasking). </p>
<p>This function gets called in the idle time between transmission of data and response from slave. Do not call functions that read from the serial buffer that is used by <a class="el" href="class_modbus_master.html" title="Arduino class library for communicating with Modbus slaves over RS232/485 (via RTU protocol)...">ModbusMaster</a>. Use of i2c/TWI, 1-Wire, other serial ports, etc. is permitted within callback function.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="class_modbus_master.html#a4c88df0ed38e98457e8ac74c2ed5dc81" title="Modbus transaction engine. ">ModbusMaster::ModbusMasterTransaction()</a> </dd></dl>
<div class="fragment"><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;{</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  _idle = <a class="code" href="class_modbus_master.html#aea6654dac81e6b692dd6a1b0be8a218e">idle</a>;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;}</div>
<div class="ttc" id="class_modbus_master_html_aea6654dac81e6b692dd6a1b0be8a218e"><div class="ttname"><a href="class_modbus_master.html#aea6654dac81e6b692dd6a1b0be8a218e">ModbusMaster::idle</a></div><div class="ttdeci">void idle(void(*)())</div><div class="ttdoc">Set idle time callback function (cooperative multitasking). </div><div class="ttdef"><b>Definition:</b> ModbusMaster.cpp:262</div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4c88df0ed38e98457e8ac74c2ed5dc81"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t ModbusMaster::ModbusMasterTransaction </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>u8MBFunction</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Modbus transaction engine. </p>
<p>Sequence:</p><ul>
<li>assemble Modbus Request Application Data Unit (ADU), based on particular function called</li>
<li>transmit request over selected serial port</li>
<li>wait for/retrieve response</li>
<li>evaluate/disassemble response</li>
<li>return status (success/exception)</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">u8MBFunction</td><td>Modbus function (0x01..0xFF) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success; exception number on failure </dd></dl>
<div class="fragment"><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;{</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;  uint8_t u8ModbusADU[256];</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;  uint8_t u8ModbusADUSize = 0;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;  uint8_t i, u8Qty;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;  uint16_t u16CRC;</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  uint32_t u32StartTime;</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  uint8_t u8BytesLeft = 8;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;  uint8_t u8MBStatus = <a class="code" href="group__constant.html#ga81dd9e8d2936e369359777d67769a657">ku8MBSuccess</a>;</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;  </div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;  <span class="comment">// assemble Modbus Request Application Data Unit</span></div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;  u8ModbusADU[u8ModbusADUSize++] = <a class="code" href="class_modbus_master.html#a8bc19d22b864e85ad67b4b633fa56597">_u8MBSlave</a>;</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;  u8ModbusADU[u8ModbusADUSize++] = u8MBFunction;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  </div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;  <span class="keywordflow">switch</span>(u8MBFunction)</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;  {</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="class_modbus_master.html#ad7e7aa7bed1b86f24bd577725edc633d">ku8MBReadCoils</a>:</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="class_modbus_master.html#ae08306bd72d5487bccf16c12ade79098">ku8MBReadDiscreteInputs</a>:</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="class_modbus_master.html#aeaa94736b198f6a05cf74e0466afb443">ku8MBReadInputRegisters</a>:</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="class_modbus_master.html#ae6995c167c152d96b06a918869c03623">ku8MBReadHoldingRegisters</a>:</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="class_modbus_master.html#af1c77f6f5f7e0f19d0c9b9916dca2263">ku8MBReadWriteMultipleRegisters</a>:</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;      u8ModbusADU[u8ModbusADUSize++] = highByte(<a class="code" href="class_modbus_master.html#adfb48ef6321f738cc4b55c4b6e4a6335">_u16ReadAddress</a>);</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;      u8ModbusADU[u8ModbusADUSize++] = lowByte(<a class="code" href="class_modbus_master.html#adfb48ef6321f738cc4b55c4b6e4a6335">_u16ReadAddress</a>);</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;      u8ModbusADU[u8ModbusADUSize++] = highByte(<a class="code" href="class_modbus_master.html#a043a88f0b184accd9176770dee55a6b3">_u16ReadQty</a>);</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;      u8ModbusADU[u8ModbusADUSize++] = lowByte(<a class="code" href="class_modbus_master.html#a043a88f0b184accd9176770dee55a6b3">_u16ReadQty</a>);</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;  }</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;  </div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;  <span class="keywordflow">switch</span>(u8MBFunction)</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;  {</div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="class_modbus_master.html#a401bf89674f94726efca951115704869">ku8MBWriteSingleCoil</a>:</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="class_modbus_master.html#a1de5e699bcada855fb26e336d2cd2cd3">ku8MBMaskWriteRegister</a>:</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="class_modbus_master.html#a31e5f44d74fa84bf4c9440c82d123fe9">ku8MBWriteMultipleCoils</a>:</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="class_modbus_master.html#ab68b007cd9473c3ed09f36fb0f6ee3fa">ku8MBWriteSingleRegister</a>:</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="class_modbus_master.html#adf1f58e7806d4c7bc1638255e2639b86">ku8MBWriteMultipleRegisters</a>:</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="class_modbus_master.html#af1c77f6f5f7e0f19d0c9b9916dca2263">ku8MBReadWriteMultipleRegisters</a>:</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;      u8ModbusADU[u8ModbusADUSize++] = highByte(<a class="code" href="class_modbus_master.html#a00edff3fbd53d94dcc1b6be593c61289">_u16WriteAddress</a>);</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;      u8ModbusADU[u8ModbusADUSize++] = lowByte(<a class="code" href="class_modbus_master.html#a00edff3fbd53d94dcc1b6be593c61289">_u16WriteAddress</a>);</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;  }</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;  </div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;  <span class="keywordflow">switch</span>(u8MBFunction)</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;  {</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="class_modbus_master.html#a401bf89674f94726efca951115704869">ku8MBWriteSingleCoil</a>:</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;      u8ModbusADU[u8ModbusADUSize++] = highByte(<a class="code" href="class_modbus_master.html#ad3191c5da05cf72e117814ba0472b420">_u16WriteQty</a>);</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;      u8ModbusADU[u8ModbusADUSize++] = lowByte(<a class="code" href="class_modbus_master.html#ad3191c5da05cf72e117814ba0472b420">_u16WriteQty</a>);</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;      </div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="class_modbus_master.html#ab68b007cd9473c3ed09f36fb0f6ee3fa">ku8MBWriteSingleRegister</a>:</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;      u8ModbusADU[u8ModbusADUSize++] = highByte(<a class="code" href="class_modbus_master.html#a8a79a050ef684f78b06b7543a56f54fb">_u16TransmitBuffer</a>[0]);</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;      u8ModbusADU[u8ModbusADUSize++] = lowByte(<a class="code" href="class_modbus_master.html#a8a79a050ef684f78b06b7543a56f54fb">_u16TransmitBuffer</a>[0]);</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;      </div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="class_modbus_master.html#a31e5f44d74fa84bf4c9440c82d123fe9">ku8MBWriteMultipleCoils</a>:</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;      u8ModbusADU[u8ModbusADUSize++] = highByte(<a class="code" href="class_modbus_master.html#ad3191c5da05cf72e117814ba0472b420">_u16WriteQty</a>);</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;      u8ModbusADU[u8ModbusADUSize++] = lowByte(<a class="code" href="class_modbus_master.html#ad3191c5da05cf72e117814ba0472b420">_u16WriteQty</a>);</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;      u8Qty = (<a class="code" href="class_modbus_master.html#ad3191c5da05cf72e117814ba0472b420">_u16WriteQty</a> % 8) ? ((<a class="code" href="class_modbus_master.html#ad3191c5da05cf72e117814ba0472b420">_u16WriteQty</a> &gt;&gt; 3) + 1) : (<a class="code" href="class_modbus_master.html#ad3191c5da05cf72e117814ba0472b420">_u16WriteQty</a> &gt;&gt; 3);</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;      u8ModbusADU[u8ModbusADUSize++] = u8Qty;</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;      <span class="keywordflow">for</span> (i = 0; i &lt; u8Qty; i++)</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;      {</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;        <span class="keywordflow">switch</span>(i % 2)</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;        {</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;          <span class="keywordflow">case</span> 0: <span class="comment">// i is even</span></div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;            u8ModbusADU[u8ModbusADUSize++] = lowByte(<a class="code" href="class_modbus_master.html#a8a79a050ef684f78b06b7543a56f54fb">_u16TransmitBuffer</a>[i &gt;&gt; 1]);</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;            </div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;          <span class="keywordflow">case</span> 1: <span class="comment">// i is odd</span></div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;            u8ModbusADU[u8ModbusADUSize++] = highByte(<a class="code" href="class_modbus_master.html#a8a79a050ef684f78b06b7543a56f54fb">_u16TransmitBuffer</a>[i &gt;&gt; 1]);</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;        }</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;      }</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;      </div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="class_modbus_master.html#adf1f58e7806d4c7bc1638255e2639b86">ku8MBWriteMultipleRegisters</a>:</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="class_modbus_master.html#af1c77f6f5f7e0f19d0c9b9916dca2263">ku8MBReadWriteMultipleRegisters</a>:</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;      u8ModbusADU[u8ModbusADUSize++] = highByte(<a class="code" href="class_modbus_master.html#ad3191c5da05cf72e117814ba0472b420">_u16WriteQty</a>);</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;      u8ModbusADU[u8ModbusADUSize++] = lowByte(<a class="code" href="class_modbus_master.html#ad3191c5da05cf72e117814ba0472b420">_u16WriteQty</a>);</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;      u8ModbusADU[u8ModbusADUSize++] = lowByte(<a class="code" href="class_modbus_master.html#ad3191c5da05cf72e117814ba0472b420">_u16WriteQty</a> &lt;&lt; 1);</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;      </div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;      <span class="keywordflow">for</span> (i = 0; i &lt; lowByte(<a class="code" href="class_modbus_master.html#ad3191c5da05cf72e117814ba0472b420">_u16WriteQty</a>); i++)</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;      {</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;        u8ModbusADU[u8ModbusADUSize++] = highByte(<a class="code" href="class_modbus_master.html#a8a79a050ef684f78b06b7543a56f54fb">_u16TransmitBuffer</a>[i]);</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;        u8ModbusADU[u8ModbusADUSize++] = lowByte(<a class="code" href="class_modbus_master.html#a8a79a050ef684f78b06b7543a56f54fb">_u16TransmitBuffer</a>[i]);</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;      }</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;      </div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="class_modbus_master.html#a1de5e699bcada855fb26e336d2cd2cd3">ku8MBMaskWriteRegister</a>:</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;      u8ModbusADU[u8ModbusADUSize++] = highByte(<a class="code" href="class_modbus_master.html#a8a79a050ef684f78b06b7543a56f54fb">_u16TransmitBuffer</a>[0]);</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;      u8ModbusADU[u8ModbusADUSize++] = lowByte(<a class="code" href="class_modbus_master.html#a8a79a050ef684f78b06b7543a56f54fb">_u16TransmitBuffer</a>[0]);</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;      u8ModbusADU[u8ModbusADUSize++] = highByte(<a class="code" href="class_modbus_master.html#a8a79a050ef684f78b06b7543a56f54fb">_u16TransmitBuffer</a>[1]);</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;      u8ModbusADU[u8ModbusADUSize++] = lowByte(<a class="code" href="class_modbus_master.html#a8a79a050ef684f78b06b7543a56f54fb">_u16TransmitBuffer</a>[1]);</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;  }</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;  </div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;  <span class="comment">// append CRC</span></div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;  u16CRC = 0xFFFF;</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;  <span class="keywordflow">for</span> (i = 0; i &lt; u8ModbusADUSize; i++)</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;  {</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    u16CRC = <a class="code" href="group__util__crc16.html#ga3185a4c5fe188c6bc16ce4f8dc03facf">crc16_update</a>(u16CRC, u8ModbusADU[i]);</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;  }</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;  u8ModbusADU[u8ModbusADUSize++] = lowByte(u16CRC);</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;  u8ModbusADU[u8ModbusADUSize++] = highByte(u16CRC);</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;  u8ModbusADU[u8ModbusADUSize] = 0;</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;  </div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;  <span class="comment">// transmit request</span></div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;  <span class="keywordflow">for</span> (i = 0; i &lt; u8ModbusADUSize; i++)</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;  {</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;<span class="preprocessor">#if defined(ARDUINO) &amp;&amp; ARDUINO &gt;= 100</span></div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    MBSerial-&gt;write(u8ModbusADU[i]);</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;    MBSerial-&gt;print(u8ModbusADU[i], BYTE);</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;  }</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;  </div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;  u8ModbusADUSize = 0;</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;  MBSerial-&gt;flush();</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;  </div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;  <span class="comment">// loop until we run out of time or bytes, or an error occurs</span></div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;  u32StartTime = millis();</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;  <span class="keywordflow">while</span> (u8BytesLeft &amp;&amp; !u8MBStatus)</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;  {</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;    <span class="keywordflow">if</span> (MBSerial-&gt;available())</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    {</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;<span class="preprocessor">#if __MODBUSMASTER_DEBUG__</span></div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;      digitalWrite(4, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;      u8ModbusADU[u8ModbusADUSize++] = MBSerial-&gt;read();</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;      u8BytesLeft--;</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;<span class="preprocessor">#if __MODBUSMASTER_DEBUG__</span></div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;      digitalWrite(4, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;    }</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;    {</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;<span class="preprocessor">#if __MODBUSMASTER_DEBUG__</span></div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;      digitalWrite(5, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;      <span class="keywordflow">if</span> (_idle)</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;      {</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        _idle();</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;      }</div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;<span class="preprocessor">#if __MODBUSMASTER_DEBUG__</span></div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;      digitalWrite(5, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    }</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    </div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;    <span class="comment">// evaluate slave ID, function code once enough bytes have been read</span></div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;    <span class="keywordflow">if</span> (u8ModbusADUSize == 5)</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;    {</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;      <span class="comment">// verify response is for correct Modbus slave</span></div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;      <span class="keywordflow">if</span> (u8ModbusADU[0] != <a class="code" href="class_modbus_master.html#a8bc19d22b864e85ad67b4b633fa56597">_u8MBSlave</a>)</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;      {</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;        u8MBStatus = <a class="code" href="group__constant.html#ga19521b4671bdc1ded03af72e2f3b958e">ku8MBInvalidSlaveID</a>;</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;      }</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;      </div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;      <span class="comment">// verify response is for correct Modbus function code (mask exception bit 7)</span></div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;      <span class="keywordflow">if</span> ((u8ModbusADU[1] &amp; 0x7F) != u8MBFunction)</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;      {</div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;        u8MBStatus = <a class="code" href="group__constant.html#ga31e9072531cf487c137b68b5e1e68926">ku8MBInvalidFunction</a>;</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;      }</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;      </div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;      <span class="comment">// check whether Modbus exception occurred; return Modbus Exception Code</span></div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;      <span class="keywordflow">if</span> (bitRead(u8ModbusADU[1], 7))</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;      {</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;        u8MBStatus = u8ModbusADU[2];</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;      }</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;      </div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;      <span class="comment">// evaluate returned Modbus function code</span></div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;      <span class="keywordflow">switch</span>(u8ModbusADU[1])</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;      {</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="class_modbus_master.html#ad7e7aa7bed1b86f24bd577725edc633d">ku8MBReadCoils</a>:</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="class_modbus_master.html#ae08306bd72d5487bccf16c12ade79098">ku8MBReadDiscreteInputs</a>:</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="class_modbus_master.html#aeaa94736b198f6a05cf74e0466afb443">ku8MBReadInputRegisters</a>:</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="class_modbus_master.html#ae6995c167c152d96b06a918869c03623">ku8MBReadHoldingRegisters</a>:</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="class_modbus_master.html#af1c77f6f5f7e0f19d0c9b9916dca2263">ku8MBReadWriteMultipleRegisters</a>:</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;          u8BytesLeft = u8ModbusADU[2];</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;          </div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="class_modbus_master.html#a401bf89674f94726efca951115704869">ku8MBWriteSingleCoil</a>:</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="class_modbus_master.html#a31e5f44d74fa84bf4c9440c82d123fe9">ku8MBWriteMultipleCoils</a>:</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="class_modbus_master.html#ab68b007cd9473c3ed09f36fb0f6ee3fa">ku8MBWriteSingleRegister</a>:</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="class_modbus_master.html#adf1f58e7806d4c7bc1638255e2639b86">ku8MBWriteMultipleRegisters</a>:</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;          u8BytesLeft = 3;</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;          </div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="class_modbus_master.html#a1de5e699bcada855fb26e336d2cd2cd3">ku8MBMaskWriteRegister</a>:</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;          u8BytesLeft = 5;</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;          <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;      }</div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    }</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;    <span class="keywordflow">if</span> (millis() &gt; (u32StartTime + <a class="code" href="class_modbus_master.html#ac9c5d42e3b5cd7ec40ce0c86f6fc1772">ku8MBResponseTimeout</a>))</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    {</div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;      u8MBStatus = <a class="code" href="group__constant.html#ga8eb8e14ee2bcf58afc3fbbb4014f297c">ku8MBResponseTimedOut</a>;</div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;    }</div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;  }</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;  </div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;  <span class="comment">// verify response is large enough to inspect further</span></div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;  <span class="keywordflow">if</span> (!u8MBStatus &amp;&amp; u8ModbusADUSize &gt;= 5)</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;  {</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    <span class="comment">// calculate CRC</span></div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    u16CRC = 0xFFFF;</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; (u8ModbusADUSize - 2); i++)</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;    {</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;      u16CRC = <a class="code" href="group__util__crc16.html#ga3185a4c5fe188c6bc16ce4f8dc03facf">crc16_update</a>(u16CRC, u8ModbusADU[i]);</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;    }</div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    </div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    <span class="comment">// verify CRC</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;    <span class="keywordflow">if</span> (!u8MBStatus &amp;&amp; (lowByte(u16CRC) != u8ModbusADU[u8ModbusADUSize - 2] ||</div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;      highByte(u16CRC) != u8ModbusADU[u8ModbusADUSize - 1]))</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    {</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;      u8MBStatus = <a class="code" href="group__constant.html#gaa73463392a988bbc5260690168b5ca08">ku8MBInvalidCRC</a>;</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    }</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;  }</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;  <span class="comment">// disassemble ADU into words</span></div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;  <span class="keywordflow">if</span> (!u8MBStatus)</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;  {</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    <span class="comment">// evaluate returned Modbus function code</span></div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;    <span class="keywordflow">switch</span>(u8ModbusADU[1])</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;    {</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="class_modbus_master.html#ad7e7aa7bed1b86f24bd577725edc633d">ku8MBReadCoils</a>:</div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="class_modbus_master.html#ae08306bd72d5487bccf16c12ade79098">ku8MBReadDiscreteInputs</a>:</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;        <span class="comment">// load bytes into word; response bytes are ordered L, H, L, H, ...</span></div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; (u8ModbusADU[2] &gt;&gt; 1); i++)</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;        {</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;          <span class="keywordflow">if</span> (i &lt; <a class="code" href="class_modbus_master.html#ab9a1a34c8e3bbd84529230e559694c29">ku8MaxBufferSize</a>)</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;          {</div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;            <a class="code" href="class_modbus_master.html#a347a26fa1b91d7d0210b021e52a95268">_u16ResponseBuffer</a>[i] = word(u8ModbusADU[2 * i + 4], u8ModbusADU[2 * i + 3]);</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;          }</div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;          </div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;          _u8ResponseBufferLength = i;</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;        }</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;        </div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;        <span class="comment">// in the event of an odd number of bytes, load last byte into zero-padded word</span></div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;        <span class="keywordflow">if</span> (u8ModbusADU[2] % 2)</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;        {</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;          <span class="keywordflow">if</span> (i &lt; <a class="code" href="class_modbus_master.html#ab9a1a34c8e3bbd84529230e559694c29">ku8MaxBufferSize</a>)</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;          {</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;            <a class="code" href="class_modbus_master.html#a347a26fa1b91d7d0210b021e52a95268">_u16ResponseBuffer</a>[i] = word(0, u8ModbusADU[2 * i + 3]);</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;          }</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;          </div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;          _u8ResponseBufferLength = i + 1;</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;        }</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;        </div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="class_modbus_master.html#aeaa94736b198f6a05cf74e0466afb443">ku8MBReadInputRegisters</a>:</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="class_modbus_master.html#ae6995c167c152d96b06a918869c03623">ku8MBReadHoldingRegisters</a>:</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="class_modbus_master.html#af1c77f6f5f7e0f19d0c9b9916dca2263">ku8MBReadWriteMultipleRegisters</a>:</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;        <span class="comment">// load bytes into word; response bytes are ordered H, L, H, L, ...</span></div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; (u8ModbusADU[2] &gt;&gt; 1); i++)</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;        {</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;          <span class="keywordflow">if</span> (i &lt; <a class="code" href="class_modbus_master.html#ab9a1a34c8e3bbd84529230e559694c29">ku8MaxBufferSize</a>)</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;          {</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;            <a class="code" href="class_modbus_master.html#a347a26fa1b91d7d0210b021e52a95268">_u16ResponseBuffer</a>[i] = word(u8ModbusADU[2 * i + 3], u8ModbusADU[2 * i + 4]);</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;          }</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;          </div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;          _u8ResponseBufferLength = i;</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;        }</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    }</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;  }</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;  </div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;  _u8TransmitBufferIndex = 0;</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;  u16TransmitBufferLength = 0;</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;  _u8ResponseBufferIndex = 0;</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;  <span class="keywordflow">return</span> u8MBStatus;</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;}</div>
<div class="ttc" id="class_modbus_master_html_a00edff3fbd53d94dcc1b6be593c61289"><div class="ttname"><a href="class_modbus_master.html#a00edff3fbd53d94dcc1b6be593c61289">ModbusMaster::_u16WriteAddress</a></div><div class="ttdeci">uint16_t _u16WriteAddress</div><div class="ttdoc">slave register to which to write </div><div class="ttdef"><b>Definition:</b> ModbusMaster.h:234</div></div>
<div class="ttc" id="group__constant_html_ga31e9072531cf487c137b68b5e1e68926"><div class="ttname"><a href="group__constant.html#ga31e9072531cf487c137b68b5e1e68926">ModbusMaster::ku8MBInvalidFunction</a></div><div class="ttdeci">static const uint8_t ku8MBInvalidFunction</div><div class="ttdoc">ModbusMaster invalid response function exception. </div><div class="ttdef"><b>Definition:</b> ModbusMaster.h:176</div></div>
<div class="ttc" id="class_modbus_master_html_ab68b007cd9473c3ed09f36fb0f6ee3fa"><div class="ttname"><a href="class_modbus_master.html#ab68b007cd9473c3ed09f36fb0f6ee3fa">ModbusMaster::ku8MBWriteSingleRegister</a></div><div class="ttdeci">static const uint8_t ku8MBWriteSingleRegister</div><div class="ttdoc">Modbus function 0x06 Write Single Register. </div><div class="ttdef"><b>Definition:</b> ModbusMaster.h:253</div></div>
<div class="ttc" id="class_modbus_master_html_adf1f58e7806d4c7bc1638255e2639b86"><div class="ttname"><a href="class_modbus_master.html#adf1f58e7806d4c7bc1638255e2639b86">ModbusMaster::ku8MBWriteMultipleRegisters</a></div><div class="ttdeci">static const uint8_t ku8MBWriteMultipleRegisters</div><div class="ttdoc">Modbus function 0x10 Write Multiple Registers. </div><div class="ttdef"><b>Definition:</b> ModbusMaster.h:254</div></div>
<div class="ttc" id="group__constant_html_ga8eb8e14ee2bcf58afc3fbbb4014f297c"><div class="ttname"><a href="group__constant.html#ga8eb8e14ee2bcf58afc3fbbb4014f297c">ModbusMaster::ku8MBResponseTimedOut</a></div><div class="ttdeci">static const uint8_t ku8MBResponseTimedOut</div><div class="ttdoc">ModbusMaster response timed out exception. </div><div class="ttdef"><b>Definition:</b> ModbusMaster.h:186</div></div>
<div class="ttc" id="class_modbus_master_html_ae6995c167c152d96b06a918869c03623"><div class="ttname"><a href="class_modbus_master.html#ae6995c167c152d96b06a918869c03623">ModbusMaster::ku8MBReadHoldingRegisters</a></div><div class="ttdeci">static const uint8_t ku8MBReadHoldingRegisters</div><div class="ttdoc">Modbus function 0x03 Read Holding Registers. </div><div class="ttdef"><b>Definition:</b> ModbusMaster.h:251</div></div>
<div class="ttc" id="class_modbus_master_html_ac9c5d42e3b5cd7ec40ce0c86f6fc1772"><div class="ttname"><a href="class_modbus_master.html#ac9c5d42e3b5cd7ec40ce0c86f6fc1772">ModbusMaster::ku8MBResponseTimeout</a></div><div class="ttdeci">static const uint8_t ku8MBResponseTimeout</div><div class="ttdoc">Modbus timeout [milliseconds]. </div><div class="ttdef"><b>Definition:</b> ModbusMaster.h:259</div></div>
<div class="ttc" id="class_modbus_master_html_a401bf89674f94726efca951115704869"><div class="ttname"><a href="class_modbus_master.html#a401bf89674f94726efca951115704869">ModbusMaster::ku8MBWriteSingleCoil</a></div><div class="ttdeci">static const uint8_t ku8MBWriteSingleCoil</div><div class="ttdoc">Modbus function 0x05 Write Single Coil. </div><div class="ttdef"><b>Definition:</b> ModbusMaster.h:247</div></div>
<div class="ttc" id="group__constant_html_ga19521b4671bdc1ded03af72e2f3b958e"><div class="ttname"><a href="group__constant.html#ga19521b4671bdc1ded03af72e2f3b958e">ModbusMaster::ku8MBInvalidSlaveID</a></div><div class="ttdeci">static const uint8_t ku8MBInvalidSlaveID</div><div class="ttdoc">ModbusMaster invalid response slave ID exception. </div><div class="ttdef"><b>Definition:</b> ModbusMaster.h:167</div></div>
<div class="ttc" id="class_modbus_master_html_a043a88f0b184accd9176770dee55a6b3"><div class="ttname"><a href="class_modbus_master.html#a043a88f0b184accd9176770dee55a6b3">ModbusMaster::_u16ReadQty</a></div><div class="ttdeci">uint16_t _u16ReadQty</div><div class="ttdoc">quantity of words to read </div><div class="ttdef"><b>Definition:</b> ModbusMaster.h:232</div></div>
<div class="ttc" id="class_modbus_master_html_ab9a1a34c8e3bbd84529230e559694c29"><div class="ttname"><a href="class_modbus_master.html#ab9a1a34c8e3bbd84529230e559694c29">ModbusMaster::ku8MaxBufferSize</a></div><div class="ttdeci">static const uint8_t ku8MaxBufferSize</div><div class="ttdoc">size of response/transmit buffers </div><div class="ttdef"><b>Definition:</b> ModbusMaster.h:230</div></div>
<div class="ttc" id="class_modbus_master_html_aeaa94736b198f6a05cf74e0466afb443"><div class="ttname"><a href="class_modbus_master.html#aeaa94736b198f6a05cf74e0466afb443">ModbusMaster::ku8MBReadInputRegisters</a></div><div class="ttdeci">static const uint8_t ku8MBReadInputRegisters</div><div class="ttdoc">Modbus function 0x04 Read Input Registers. </div><div class="ttdef"><b>Definition:</b> ModbusMaster.h:252</div></div>
<div class="ttc" id="class_modbus_master_html_a347a26fa1b91d7d0210b021e52a95268"><div class="ttname"><a href="class_modbus_master.html#a347a26fa1b91d7d0210b021e52a95268">ModbusMaster::_u16ResponseBuffer</a></div><div class="ttdeci">uint16_t _u16ResponseBuffer[ku8MaxBufferSize]</div><div class="ttdoc">buffer to store Modbus slave response; read via GetResponseBuffer() </div><div class="ttdef"><b>Definition:</b> ModbusMaster.h:233</div></div>
<div class="ttc" id="class_modbus_master_html_ad3191c5da05cf72e117814ba0472b420"><div class="ttname"><a href="class_modbus_master.html#ad3191c5da05cf72e117814ba0472b420">ModbusMaster::_u16WriteQty</a></div><div class="ttdeci">uint16_t _u16WriteQty</div><div class="ttdoc">quantity of words to write </div><div class="ttdef"><b>Definition:</b> ModbusMaster.h:235</div></div>
<div class="ttc" id="class_modbus_master_html_adfb48ef6321f738cc4b55c4b6e4a6335"><div class="ttname"><a href="class_modbus_master.html#adfb48ef6321f738cc4b55c4b6e4a6335">ModbusMaster::_u16ReadAddress</a></div><div class="ttdeci">uint16_t _u16ReadAddress</div><div class="ttdoc">slave register from which to read </div><div class="ttdef"><b>Definition:</b> ModbusMaster.h:231</div></div>
<div class="ttc" id="class_modbus_master_html_a31e5f44d74fa84bf4c9440c82d123fe9"><div class="ttname"><a href="class_modbus_master.html#a31e5f44d74fa84bf4c9440c82d123fe9">ModbusMaster::ku8MBWriteMultipleCoils</a></div><div class="ttdeci">static const uint8_t ku8MBWriteMultipleCoils</div><div class="ttdoc">Modbus function 0x0F Write Multiple Coils. </div><div class="ttdef"><b>Definition:</b> ModbusMaster.h:248</div></div>
<div class="ttc" id="class_modbus_master_html_a1de5e699bcada855fb26e336d2cd2cd3"><div class="ttname"><a href="class_modbus_master.html#a1de5e699bcada855fb26e336d2cd2cd3">ModbusMaster::ku8MBMaskWriteRegister</a></div><div class="ttdeci">static const uint8_t ku8MBMaskWriteRegister</div><div class="ttdoc">Modbus function 0x16 Mask Write Register. </div><div class="ttdef"><b>Definition:</b> ModbusMaster.h:255</div></div>
<div class="ttc" id="group__constant_html_ga81dd9e8d2936e369359777d67769a657"><div class="ttname"><a href="group__constant.html#ga81dd9e8d2936e369359777d67769a657">ModbusMaster::ku8MBSuccess</a></div><div class="ttdeci">static const uint8_t ku8MBSuccess</div><div class="ttdoc">ModbusMaster success. </div><div class="ttdef"><b>Definition:</b> ModbusMaster.h:158</div></div>
<div class="ttc" id="class_modbus_master_html_ae08306bd72d5487bccf16c12ade79098"><div class="ttname"><a href="class_modbus_master.html#ae08306bd72d5487bccf16c12ade79098">ModbusMaster::ku8MBReadDiscreteInputs</a></div><div class="ttdeci">static const uint8_t ku8MBReadDiscreteInputs</div><div class="ttdoc">Modbus function 0x02 Read Discrete Inputs. </div><div class="ttdef"><b>Definition:</b> ModbusMaster.h:246</div></div>
<div class="ttc" id="class_modbus_master_html_a8a79a050ef684f78b06b7543a56f54fb"><div class="ttname"><a href="class_modbus_master.html#a8a79a050ef684f78b06b7543a56f54fb">ModbusMaster::_u16TransmitBuffer</a></div><div class="ttdeci">uint16_t _u16TransmitBuffer[ku8MaxBufferSize]</div><div class="ttdoc">buffer containing data to transmit to Modbus slave; set via SetTransmitBuffer() </div><div class="ttdef"><b>Definition:</b> ModbusMaster.h:236</div></div>
<div class="ttc" id="group__constant_html_gaa73463392a988bbc5260690168b5ca08"><div class="ttname"><a href="group__constant.html#gaa73463392a988bbc5260690168b5ca08">ModbusMaster::ku8MBInvalidCRC</a></div><div class="ttdeci">static const uint8_t ku8MBInvalidCRC</div><div class="ttdoc">ModbusMaster invalid response CRC exception. </div><div class="ttdef"><b>Definition:</b> ModbusMaster.h:195</div></div>
<div class="ttc" id="class_modbus_master_html_a8bc19d22b864e85ad67b4b633fa56597"><div class="ttname"><a href="class_modbus_master.html#a8bc19d22b864e85ad67b4b633fa56597">ModbusMaster::_u8MBSlave</a></div><div class="ttdeci">uint8_t _u8MBSlave</div><div class="ttdoc">Modbus slave (1..255) initialized in constructor. </div><div class="ttdef"><b>Definition:</b> ModbusMaster.h:228</div></div>
<div class="ttc" id="group__util__crc16_html_ga3185a4c5fe188c6bc16ce4f8dc03facf"><div class="ttname"><a href="group__util__crc16.html#ga3185a4c5fe188c6bc16ce4f8dc03facf">crc16_update</a></div><div class="ttdeci">static uint16_t crc16_update(uint16_t crc, uint8_t a)</div><div class="ttdoc">Processor-independent CRC-16 calculation. </div><div class="ttdef"><b>Definition:</b> crc16.h:71</div></div>
<div class="ttc" id="class_modbus_master_html_af1c77f6f5f7e0f19d0c9b9916dca2263"><div class="ttname"><a href="class_modbus_master.html#af1c77f6f5f7e0f19d0c9b9916dca2263">ModbusMaster::ku8MBReadWriteMultipleRegisters</a></div><div class="ttdeci">static const uint8_t ku8MBReadWriteMultipleRegisters</div><div class="ttdoc">Modbus function 0x17 Read Write Multiple Registers. </div><div class="ttdef"><b>Definition:</b> ModbusMaster.h:256</div></div>
<div class="ttc" id="class_modbus_master_html_ad7e7aa7bed1b86f24bd577725edc633d"><div class="ttname"><a href="class_modbus_master.html#ad7e7aa7bed1b86f24bd577725edc633d">ModbusMaster::ku8MBReadCoils</a></div><div class="ttdeci">static const uint8_t ku8MBReadCoils</div><div class="ttdoc">Modbus function 0x01 Read Coils. </div><div class="ttdef"><b>Definition:</b> ModbusMaster.h:245</div></div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_modbus_master_8h_source.html">ModbusMaster.h</a></li>
<li><a class="el" href="_modbus_master_8cpp.html">ModbusMaster.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="class_modbus_master.html">ModbusMaster</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
